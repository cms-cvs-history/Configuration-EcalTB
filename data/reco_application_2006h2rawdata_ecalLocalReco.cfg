process RECO = {
    service = MessageLogger
    {
        untracked vstring destinations = { "cout" }
        untracked vstring categories = {  "DDLParser", "FwkJob", "FwkReport"}
        untracked PSet cout = { untracked string threshold = "INFO"
	    untracked PSet INFO        = { untracked int32 limit = 10000 }
	    untracked PSet DDLParser = { untracked int32 limit = 0 }
	    untracked PSet FwkJob = { untracked int32 limit =10 }
	    untracked PSet FwkReport = { untracked int32 limit = 20 }
	}
    }
    
    
    // Loads the events from testbeam files
    source = PoolSource { 
	untracked vstring fileNames = { 'file:/u1/meridian/data/h2/2006/h2.00028833.combined.OutServ_0.0.root'}
	untracked int32 maxEvents = 1000
    }
    
    
    module tbunpacker = HcalTBObjectUnpacker {
	untracked int32 HcalTriggerFED  = 1
	untracked int32 HcalSlowDataFED = -1
	untracked int32 HcalTDCFED      = 8
	untracked int32 HcalQADCFED      = 8
	untracked int32 HcalSourcePosFED = -1
	untracked bool IncludeUnmatchedHits = false
	untracked string ConfigurationFile = 'configQADCTDC.txt'
    }
    
    
    module ecalTBunpack = EcalRawToDigi
    {
	untracked vint32 FEDs = { 9 }
	untracked int32 EcalFirstFED = 8
	untracked string DCCMapFile = "EventFilter/EcalRawToDigi/data/DCCMap_h2.txt"
    }
    
    # Ecal TDC Reco
    include "RecoTBCalo/EcalTBTDCReconstructor/data/ecal2006TBH2TDCReconstructor.cfi"
    
    include "Configuration/EcalTB/data/readConfigurationH2_2006_v0.cff"
    
    # uncalibrated rechit producer
    include "RecoTBCalo/EcalTBRecProducers/data/ecal2006TBH2WeightUncalibRecHit.cfi"

    module reco-pool-out = PoolOutputModule {
	untracked string fileName = "h2.ecalReco.root"
	untracked vstring outputCommands = {
            "keep *",
      	    "drop FEDRawDataCollection_*_*_*"
	}
    }    

    path p = { getCond, tbunpacker, ecalTBunpack, ecal2006TBH2TDCReconstructor, ecal2006TBH2WeightUncalibRecHit }

    endpath ep = { reco-pool-out }
    
}
