process recHitProd  = {

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  # input
  source = PoolSource {
     untracked vstring fileNames = {'rfio:/u1/meridian/data/h4/2006/h4b.00013247.A.0.0.root'}
     untracked int32 maxEvents = -1
     untracked uint32 debugVebosity = 1
     untracked bool   debugFlag     = false
  }

  # Read Intercalibrations from offline DB (v2 for 0_8_x)
  include "Configuration/EcalTB/data/readIntercalibrationsFromAscii2006_v0.cff"
  # rechit producer
  module ecal2006TBRecHit = EcalRecHitProducer {
    string uncalibRecHitProducer   = "ecal2006TBWeightUncalibRecHit"
    string EBuncalibRecHitCollection = "EcalUncalibRecHitsEB"
    string EEuncalibRecHitCollection = ""
    string EBrechitCollection        = "EcalRecHitsEB"
    string EErechitCollection        = ""
    }

  #output module dropping everything apart calibrated containers
  module out = PoolOutputModule 
   {	
	untracked vstring outputCommands = 
	  {
	    "drop *",
	    "keep EcalRecHitsSorted_*_*_*",
	    "keep EcalTBHodoscopeRecInfo_*_*_*",
	    "keep EcalTBEventHeader_*_*_*",
	    "keep EcalTBTDCRecInfo_*_*_*"
	  }
     untracked string fileName = 'tbhits.root'
   }

  #Use this to get calibrations from the DB	
  path p = { ecal2006TBRecHit }

  endpath ep = { out }
}
