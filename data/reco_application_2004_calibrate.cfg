process recHitProd  = {

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  # input
  source = PoolSource {
     untracked vstring fileNames = {'file:tbuncalibhits.root'}
     untracked int32 maxEvents = -1
     untracked uint32 debugVebosity = 1
     untracked bool   debugFlag     = false
  }

  # Read Intercalibrations from offline DB (v2 for 0_8_x)
  include "Configuration/EcalTB/data/readCalibrations2004_v2.cff"
  # rechit producer
  include "RecoLocalCalo/EcalRecProducers/data/ecal2004TBRecHit.cfi"

  #output module dropping everything apart calibrated containers
  module out = PoolOutputModule 
   {	
	untracked vstring outputCommands = 
	  {
	    "drop *",
	    "keep EcalRecHitsSorted_*_*_*",
	    "keep EcalTBHodoscopeRecInfo_*_*_*",
	    "keep EcalTBEventHeader_*_*_*",
	    "keep EcalTBTDCRecInfo_*_*_*"
	  }
     untracked string fileName = 'tbhits.root'
   }

  #Use this to get calibrations from the DB	
  path p = { getCalibrations, ecal2004TBRecHit }

  endpath ep = { out }
}
