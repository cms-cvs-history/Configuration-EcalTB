process uncalibRecHitsProd  = {

 # initialize  MessageLogger
 #  include "FWCore/MessageLogger/data/MessageLogger.cfi"
	
     service = MessageLogger{
       untracked vstring destinations = { "cout" }
       untracked vstring debugModules = { "ecalTBunpack" }
##       untracked vstring debugModules = { "ecalMonitorModule" }
##       untracked vstring debugModules = { "*" }
##       untracked vstring categories = { "EcalTBInputService",
##                                        "EcalBarrelMonitor"
##                                      }
       untracked PSet cout = { untracked string threshold = "INFO"
         untracked PSet default = { untracked int32 limit = 100000 }
##         untracked PSet EcalTBInputService = { untracked int32 limit = 1000000 }
##         untracked PSet EcalBarrelMonitorModule = { untracked int32 limit = 1000000 }
         untracked bool noTimeStamps = true
         untracked bool noLineBreaks = true
       }
     }

    # input Source
    untracked PSet maxEvents = {untracked int32 input = 1000}
    
    #load conditions
    include "Configuration/EcalTB/data/readConfigurationH4_2007_v0.cff"

    # input Source
    source = PoolSource {
	untracked vstring fileNames = 
	{ 
	    #	    'rfio:/castor/cern.ch/cms/archive/ecal/h4tb.pool/h4b.00017912.A.0.0.root'
	    'file:/cmsrm/pc18/meridian/h4_2007/h4b.00017937.A.0.0.root'
	}
    }
    
    #######################################################################################
    
    # Ecal unpacker
    module ecalTBunpack = ecalEBunpacker from "EventFilter/EcalTBRawToDigi/data/EcalH407UnpackerData.cfi"
    replace ecalTBunpack.produceEEdigi = true	
    replace ecalTBunpack.produceEBdigi = false
    
    # Reconstruction for 2007 rawData
    include "Configuration/EcalTB/data/localReco2007h4_rawData.cff"
    
    module out = PoolOutputModule 
    {	
	untracked string fileName = 'hits.root'
	untracked vstring outputCommands = 
	{ 
            "keep *", 
            "drop FEDRawData*_*_*_*" 
        }		
    } 	
    
    
    path p = {ecalTBunpack , localReco2007h4_rawData }
    
    endpath ep = { out }
}
