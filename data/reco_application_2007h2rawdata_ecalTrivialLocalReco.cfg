process RECO = {
    untracked PSet maxEvents = {untracked int32 input = -1}

    service = MessageLogger
    {
        untracked vstring destinations = { "cout" }
        untracked vstring categories = {  "DDLParser", "FwkJob", "FwkReport"}
        untracked PSet cout = { untracked string threshold = "INFO"
	    untracked PSet INFO        = { untracked int32 limit = 10000 }
	    untracked PSet DDLParser = { untracked int32 limit = 0 }
	    untracked PSet FwkJob = { untracked int32 limit =10 }
	    untracked PSet FwkReport = { untracked int32 limit = 20 }
	}
    }
    
    
    // Loads the events from testbeam files
    source = PoolSource { 
	untracked vstring fileNames = { 'file:/tmp/meridian/h2b.00014224.A.0.0.root'}
    }
    
    #fake calibrations
    include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"

    #unpacker
    include "EventFilter/EcalTBRawToDigi/data/Ecal07UnpackerData.cfi"
    
    #Since no TDC is present using CMS weight recoinstruction without tdc bins
    include "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
    replace ecalWeightUncalibRecHit.EBdigiCollection = ecalEBunpacker:ebDigis
    replace ecalWeightUncalibRecHit.EEdigiCollection = ecalEBunpacker:eeDigis 

    module reco-pool-out = PoolOutputModule {
	untracked string fileName = "h2.ecalReco.root"
	untracked vstring outputCommands = {
            "keep *",
      	    "drop FEDRawDataCollection_*_*_*"
	}
    }    

    path p = { ecalEBunpacker, ecalWeightUncalibRecHit }

    endpath ep = { reco-pool-out }
    
}
