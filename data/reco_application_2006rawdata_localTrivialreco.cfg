process uncalibRecHitsProd  = {

 # initialize  MessageLogger
 #  include "FWCore/MessageLogger/data/MessageLogger.cfi"
	
     service = MessageLogger{
       untracked vstring destinations = { "cout" }
       untracked vstring debugModules = { "ecalTBunpack" }
##       untracked vstring debugModules = { "ecalMonitorModule" }
##       untracked vstring debugModules = { "*" }
##       untracked vstring categories = { "EcalTBInputService",
##                                        "EcalBarrelMonitor"
##                                      }
       untracked PSet cout = { untracked string threshold = "INFO"
         untracked PSet default = { untracked int32 limit = 100000 }
##         untracked PSet EcalTBInputService = { untracked int32 limit = 1000000 }
##         untracked PSet EcalBarrelMonitorModule = { untracked int32 limit = 1000000 }
         untracked bool noTimeStamps = true
         untracked bool noLineBreaks = true
       }
     }

 # input Source
	source = PoolSource {
		untracked vstring fileNames = { 'file:/u1/meridian/data/h4/2006/h4b.00011420.A.0.0.root'}
		untracked int32 maxEvents = -1
	        untracked bool isBinary = true
	}
 #######################################################################################

 es_source = EcalTrivialConditionRetriever {
        untracked bool producedEcalWeights = true
        untracked bool producedEcalPedestals = true
        untracked bool producedEcalIntercalibConstants = true
        untracked bool producedEcalGainRatios = true
        untracked bool producedEcalADCToGeVConstant = true
	untracked bool weightsForTB = false
#       If set true reading optimized weights (3+5 weights) from file 
	untracked bool getWeightsFromFile = false
#       Values to get correct noise on RecHit amplitude using 3+5 weights
 }
 # Ecal unpacker
 include "EventFilter/EcalTBRawToDigi/data/ecalTBunpack.cfi"

  module ecalWeightUncalibRecHit = EcalWeightUncalibRecHitProducer {
   string digiProducer   = "ecalTBunpack"
   string EBdigiCollection = ""
   string EEdigiCollection = ""
   string EBhitCollection  = "EcalUncalibRecHitsEB"
   string EEhitCollection  = ""
  }

  module out = PoolOutputModule 
   {	
     untracked string fileName = 'hits.root'
   }

 path p = {ecalTBunpack , ecalWeightUncalibRecHit }

 endpath ep = { out }
	
}
