process TBH42006Valid  = 
	{
    untracked PSet maxEvents = {untracked int32 input = -1}

    source = PoolSource {
         untracked vstring fileNames = {'file:ECALH4TB_detsim_hits.root'}
    }
     
  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"   

  # geometry (Only Ecal)
  include "Geometry/EcalTestBeam/data/TBH4GeometryXML.cfi"

  include "Geometry/CaloEventSetup/data/CaloGeometry.cff"
  replace CaloGeometryBuilder.SelectedCalos = {"EcalBarrel"}

  # Condition objects access
  include "CalibCalorimetry/EcalTrivialCondModules/data/EcalTrivialCondRetrieverTB.cfi"

  # DQM services
  service = DaqMonitorROOTBackEnd{ }

  service = Timing{ }
  
  service = SimpleMemoryCheck{ }

  include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

  # ECAL hits validation sequence
  include "Validation/EcalHits/data/ecalSimHitsValidation.cfi"
  include "Validation/EcalHits/data/ecalBarrelSimHitsValidation.cfi"

  sequence ecalSimHitsValidationSequence = { ecalSimHitsValidation , ecalBarrelSimHitsValidation }
		
  # ECAL digis validation sequence
  include "Validation/EcalDigis/data/ecalDigisValidation.cfi"
  replace ecalDigisValidation.EBdigiCollection = simEcalUnsuppressedDigis
  replace ecalDigisValidation.EEdigiCollection = simEcalUnsuppressedDigis
  replace ecalDigisValidation.ESdigiCollection = simEcalUnsuppressedDigis

  include "Validation/EcalDigis/data/ecalBarrelDigisValidation.cfi"
  replace ecalBarrelDigisValidation.EBdigiCollection = simEcalUnsuppressedDigis

  sequence ecalUnsuppressedDigisValidationSequence = { ecalDigisValidation , ecalBarrelDigisValidation }


  # ECAL rechits validation sequence
  include "Validation/EcalRecHits/data/ecalRecHitsValidation.cfi"
  include "Validation/EcalRecHits/data/ecalBarrelRecHitsValidation.cfi"
  replace ecalRecHitsValidation.EBrechitCollection = ecalTBSimRecHit:EcalRecHitsEB
  replace ecalRecHitsValidation.EBuncalibrechitCollection = ecalTBSimWeightUncalibRecHit:EcalUncalibRecHitsEB
  replace ecalBarrelRecHitsValidation.EBdigiCollection = simEcalUnsuppressedDigis
  replace ecalBarrelRecHitsValidation.EBuncalibrechitCollection = ecalTBSimWeightUncalibRecHit:EcalUncalibRecHitsEB

  sequence ecalUnsuppressedRecHitsValidationSequence = { ecalRecHitsValidation , ecalBarrelRecHitsValidation }

  path p1 = { ecalSimHitsValidationSequence, ecalUnsuppressedDigisValidationSequence, ecalUnsuppressedRecHitsValidationSequence }

  }		
